# [level 3] [HSAT 4회 정기 코딩 인증평가 기출] 통근버스 출발 순서 검증하기

[문제 링크](https://softeer.ai/practice/info.do?idx=1&eid=654&sw_prbl_sbms_sn=181837)

### 성능 요약
메모리: 37.16 MB, 시간: 244 ms

### 문제 설명

-----

현대자동차그룹 연구소에서는 임직원들의 편의를 위해 출퇴근 통근 버스를 제공하고 있다. 

퇴근 시간이 되면 연구소 주차장에는 수 많은 버스들이 일렬로 주차되어 있다. 퇴근 버스는 번호순서 대로 출발해야 하는데, 주차장은 폭이 좁아 앞의 버스가 모두 나가야 뒤의 버스가 나갈 수 있는 구조로 되어 있다.

버스를 순서에 맞게 출발시키기 위해, 연구소 주차장의 맞은편에 임시 주차장을 추가로 건설하였다. 이렇게 만든 임시 주차장은 출입구가 하나밖에 없는 데다가, 폭이 좁아서 스택(Stack)처럼 맨 처음 들어간 버스는 맨 마지막에 나올 수 있다. 또한, 한 번 임시 주차장으로 이동했던 버스는 다시 원래의 주차장으로 이동할 수 없다.

위와 같은 상황에서 퇴근 버스를 번호 순서대로 출발시키는 문제는 스택 정렬로 모델링할 수 있다.

스택 정렬이란, a1, a2, ..., an을 정렬할 때, 앞에서부터 순서대로 스택에 Push하거나, 스택에서 Pop하여 출력하는 것을 골라서 반복하여, 정렬된 순서로 출력되도록 하는 것이다. Stack은 가장 나중에 들어간(Push) 자료가 가장 먼저 꺼내지는(Pop) 자료구조이다. 즉, 주어진 수가 3, 1, 2의 세개라면, 3을 Push (스택에 3만 저장됨), 1을 Push (스택에 3, 1이 저장됨), 스택에서 Pop 하여 출력 (스택에 가장 나중에 들어간 1이 Pop 되어 출력됨), 2를 Push, Pop하여 출력 (2가 출력됨), Pop하여 출력으로 마지막으로 3을 출력할 수 있다.

아래의 그림은 이러한 과정을 보여준다.

![](https://softeer.ai/upload/2022/09/20220902_163409882_10859.png)

하지만, 모든 경우의 순열을 스택 정렬을 통해 순서대로 정렬할 수 있는 것은 아니다. 주어지는 입력에 따라 스택 정렬이 불가능한 경우도 있다.

임의의 자연수 i < j < k에 대해서, ai < aj이고 ai > ak인 경우가 하나라도 있으면 정렬이 불가능하다는 것이 증명되어 있다. 즉, 버스들의 번호가 a1, a2, …, an와 같이 주어질 때, 이와 같은 (i, j, k)의 사례가 있다면, (오름차순) 순서대로 스택 정렬이 불가능하다.

연구소에서 개발자로 일하고 있는 당신은, 연구소 주차장에 주차되어 있는 버스들이 임시 주차장을 활용하여 번호 순서대로(오름차순) 출발할 수 있는지 알아보는 프로그램을 만들어보려고 한다. 버스들이 번호 순서대로 출발하는 것이 불가능한 지 알아보기 위해, 그것을 증명할 수 있는 서로 다른 (i, j, k)의 케이스들을 몇 개나 찾을 수 있는 지 출력하여라. (만약, 출력값이 0이라면 버스들이 위의 과정을 통해, 순서대로 출발할 수 있음을 의미한다.)

### 제약조건

-----

3≤N≤5,000인 정수
버스 번호는 서로 중복되지 않는다.

### 입력형식
-----
첫 번째줄에 수열의 크기 N이 주어진다.
두 번째줄에 1부터 N까지의 정수가 재배열된 수열이 공백을 사이에 두고 주어진다.

### 출력형식
-----
문제에서 주어진 조건을 만족하는 서로 다른 (i, j, k) 순서쌍의 개수를 출력한다.